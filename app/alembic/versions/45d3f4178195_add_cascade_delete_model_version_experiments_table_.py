"""add on cascade delete to model_version foreign key in experiments table

Revision ID: 45d3f4178195
Revises: 258d5633e6e7
Create Date: 2022-07-22 02:43:47.193934

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '45d3f4178195'
down_revision = '258d5633e6e7'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_constraint('experiment_model_name_model_version_name_fkey', 'experiment', type_='foreignkey')
    op.create_foreign_key(None, 'experiment', 'modelversion', ['model_name', 'model_version_name'], ['model_name', 'model_version'], ondelete='CASCADE')
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_constraint(None, 'experiment', type_='foreignkey')
    op.create_foreign_key('experiment_model_name_model_version_name_fkey', 'experiment', 'modelversion', ['model_name', 'model_version_name'], ['model_name', 'model_version'])
    # ### end Alembic commands ###
