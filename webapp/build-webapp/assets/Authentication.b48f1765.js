import{aq as k,ar as E,r as c,as as I,an as P,Z as S,f as p,j as t,aZ as R,T as q,a_ as B,h as M,a$ as T,V as W,a6 as A,b0 as G,l as N,b1 as $,b2 as F,L as H,aK as V,b3 as j,b4 as K,S as y,b5 as U}from"./index.5bdb0a85.js";var d={},Z=E.exports;Object.defineProperty(d,"__esModule",{value:!0});var _=d.default=void 0;Q(c.exports);var J=Z(k()),z=I;function O(e){if(typeof WeakMap!="function")return null;var o=new WeakMap,r=new WeakMap;return(O=function(a){return a?r:o})(e)}function Q(e,o){if(!o&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=O(o);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)){var i=u?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(a,n,i):a[n]=e[n]}return a.default=e,r&&r.set(e,a),a}var X=(0,J.default)((0,z.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub");_=d.default=X;const Y="#444444",ee=P(S)`
  background-color: ${Y};
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-start;
  &:hover {
    background-color: #0a0a0a;
  }
  color: white;

  text-transform: none;
  p {
    font-weight: 200;
  }
`,te=e=>p(ee,{...e,children:[t(_,{sx:{mr:1}}),t(R,{flexItem:!0,light:!0,orientation:"vertical",sx:{mr:1,backgroundColor:"white"}}),t(q,{children:"Sign in with GitHub"})]}),re="https://backend.dev.mariner.trident.bio/api/v1/oauth?provider=github",ae=e=>t(U,{sx:{"& > *":{marginTop:3},boxShadow:"rgba(0,0,0,0.24) 0px 3px 8px",backgroundColor:"white",borderRadius:10,alignItems:"center",justifyContent:"space-between",padding:"10px 5px 20px 5px",minWidth:399,maxWidth:599,height:400,flexDirection:"column",display:"flex"},children:e.children}),oe=function(){var v,b;const[e,{data:o,error:r,isLoading:a,isSuccess:u}]=B.useLoginMutation(),n=M(),i=T(),[f]=W(),h=f.get("tk"),g=f.get("error"),{notifyError:C,success:ne}=A(),m=((b=(v=i==null?void 0:i.state)==null?void 0:v.from)==null?void 0:b.pathname)||"/";c.exports.useEffect(()=>{h&&(localStorage.setItem(G,JSON.stringify({access_token:h,token_type:"bearer"})),n(m,{replace:!0}))}),c.exports.useEffect(()=>{g&&C(g)},[]);const D=async l=>{l.preventDefault(),await e({username:s.email,password:s.password})};c.exports.useEffect(()=>{u&&n(m,{replace:!0})},[u,o]);const[s,L]=c.exports.useState({email:"",password:""}),x=l=>w=>{w.preventDefault(),L({...s,[l]:w.target.value})};return p(N,{sx:{flexDirection:"column",height:"100vh",width:"100vw",backgroundColor:"primary.light",justifyContent:"center",alignItems:"center",display:"flex"},children:[t($,{sx:{mb:3}}),t("form",{onSubmit:D,children:p(F,{component:ae,children:[t(H,{children:"Sign in"}),r&&t(V,{severity:"error",children:j(r)?K(r):"Internal Error"}),t(y,{id:"username-input",label:"Email",onChange:x("email")}),t(y,{id:"password-input",type:"password",label:"Password",onChange:x("password")}),t(S,{disabled:a||!s.email||!s.password,variant:"contained",type:"submit",children:"Sign In"}),t("a",{style:{textDecoration:"none"},href:re,children:t(te,{})})]})})]})};export{oe as default};
