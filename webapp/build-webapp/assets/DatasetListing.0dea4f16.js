import{aq as f,ar as m,as as g,an as N,j as e,F as $,f as h,C as k,p as F,b6 as j,r as B,b7 as I,b8 as d,A as T,b9 as E,ba as H,bb as U,bc as V,I as w,bd as G,a6 as J,h as O,H as P,be as K,b3 as Q,b4 as W,Z as X,bf as Y}from"./index.5bdb0a85.js";import{A as Z}from"./Avatar.f553db74.js";import{D as ee}from"./index.11bfe9c7.js";import"./Badge.44cfa6d9.js";import"./RemoveSharp.5e061972.js";import"./Container.c76c626f.js";var v={},te=m.exports;Object.defineProperty(v,"__esModule",{value:!0});var R=v.default=void 0,ae=te(f()),re=g,se=(0,ae.default)((0,re.jsx)("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download");R=v.default=se;var b={},oe=m.exports;Object.defineProperty(b,"__esModule",{value:!0});var z=b.default=void 0,ne=oe(f()),ie=g,le=(0,ne.default)((0,ie.jsx)("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done");z=b.default=le;var D={},de=m.exports;Object.defineProperty(D,"__esModule",{value:!0});var q=D.default=void 0,ce=de(f()),ue=g,pe=(0,ce.default)((0,ue.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline");q=D.default=pe;const fe=N.div`
  display: flex;
  align-items: center;
  gap: 1rem;
`,M={ready:e(z,{sx:{color:"success.main"}}),failed:e(q,{sx:{color:"error.main"}}),processing:e(k,{size:25})},me=({status:s})=>{if(!Object.keys(M).includes(s))return e($,{});const i=s.replace(/(\w)(.+)/g,(r,l)=>l.toUpperCase()+r.slice(1)),o=M[s];return h(fe,{children:[o,i]})},ge=s=>{const{datasets:i,total:o,filters:r}=F(t=>t.datasets),[l,{isLoading:u}]=j.useLazyGetDatasetsQuery();B.exports.useEffect(()=>{u||l(r)},[r]);const c=({onOpenDetails:t,onDownload:a})=>h($,{children:[e(w,{onClick:t,children:e(G,{})}),e(w,{onClick:a,children:e(R,{})})]});return e("div",{style:{overflowX:"scroll",width:"100%",overflowY:"clip"},children:e(I,{loading:u,onStateChange:t=>{var A,S;const a={},x=t.filterModel.items.find(n=>n.columnName==="Name"&&n.operatorValue==="eq");x&&(a.searchByName=x.value);const y=t.sortModel.find(n=>n.field==="rows"),C=t.sortModel.find(n=>n.field==="columns"),_=t.sortModel.find(n=>n.field==="createdAt");y&&(a.sortByRows=y.sort),C&&(a.sortByCols=C.sort),_&&(a.sortByCreatedAt=_.sort);const L={page:((A=t.paginationModel)==null?void 0:A.page)||0,perPage:((S=t.paginationModel)==null?void 0:S.rowsPerPage)||r.perPage,...a};l(L)},rows:i,columns:[{field:"name",render:(t,a)=>e(d,{position:"start",children:e(T,{to:`/datasets/${t.id}`,children:a})}),title:"Name",filterSchema:{byValue:!0},name:"Name"},{field:"rows",title:"Rows",render:(t,a)=>e(d,{position:"end",children:a}),sortable:!0,name:"Rows",customSx:{textAlign:"center"}},{field:"columns",title:"Columns",render:(t,a)=>e(d,{position:"end",children:a}),sortable:!0,name:"Columns",customSx:{textAlign:"center"}},{field:"createdAt",title:"Created At",render:t=>e(d,{position:"start",children:E(a=>a.createdAt)(t)}),sortable:!0,name:"Created At"},{field:"createdBy",title:"Created By",render:(t,a)=>e(d,{position:"center",children:e(Z,{src:a==null?void 0:a.avatarUrl})}),name:"Created By",customSx:{textAlign:"center"}},{field:"readyStatus",title:"Status",render:(t,a)=>e(d,{position:"center",children:e(me,{status:a||""})}),name:"Ready Status",customSx:{textAlign:"center"}},{field:null,title:"Actions",customSx:H,render:t=>e(U,{children:e(c,{onOpenDetails:()=>s.onOpenDetails&&s.onOpenDetails(t.id),onDownload:()=>V(t.id,t.dataUrl)})}),name:"Actions"}],filterLinkOperatorOptions:["or","and"],rowKey:t=>t.id,pagination:{total:o,rowsPerPage:(r==null?void 0:r.perPage)||25,page:(r==null?void 0:r.page)||0}})})},he=({onCreate:s})=>{const[i,{isLoading:o}]=j.usePostDatasetsMutation(),{setMessage:r}=J(),l=O();return e(P,{disableBreadcrumb:!0,children:e(ee,{loading:o,onSubmit:async c=>{try{c.file=await K(c.file),await i(c).unwrap(),r({type:"success",message:"Dataset created!"}),s()}catch(p){Q(p)&&r({type:"error",message:W(p)})}},onCancel:()=>l(-1)})})},Ae=()=>{const s=O(),[i,o]=B.exports.useState(!1);return h(P,{children:[e(X,{variant:"contained",color:"primary",style:{margin:"5px 0 5px 0"},onClick:()=>o(!0),id:"go-to-create-dataset",children:"Add Dataset"}),e(ge,{onOpenDetails:r=>s(`/datasets/${r}`)}),e(Y,{title:"Create Dataset",open:i,onClose:()=>o(!1),children:e(he,{onCreate:()=>o(!1)})})]})};export{Ae as default};
