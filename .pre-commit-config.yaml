default_install_hook_types:
  - pre-push
  - pre-commit
repos:
- repo: local
  hooks:
    - id: format
      name: Format changed files
      entry: poetry run sh scripts/format-single.sh
      fail_fast: true
      pass_filenames: true 
      language: system
      types: [python]
      stages: 
        - manual
    - id: format-check
      name: Checking code style (Possibly fixable with scripts/format.sh)
      entry: poetry run sh scripts/check-format.sh
      fail_fast: true
      pass_filenames: true
      language: system
      types: [python]
    - id: lint-single
      name: Linting code with scripts/lint-single.sh
      entry: poetry run sh scripts/lint-single.sh
      language: system
      types: [python]
      pass_filenames: true
      fail_fast: true
    - id: lint
      name: Linting code with scripts/lint.sh
      entry: poetry run sh scripts/lint.sh
      language: system
      types: [python]
      pass_filenames: false
      fail_fast: true
      stages:
        - push
    - id: test
      name: Test code with default tests (pytest.ini)
      entry: docker-compose exec -T backend pytest
      language: system
      pass_filenames: false
      fail_fast: true
      stages: 
        - push
